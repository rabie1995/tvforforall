(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[500],{7620:function(e,t,a){Promise.resolve().then(a.bind(a,1549))},1549:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var l=a(7437),s=a(2265),r=a(7138),n=a(6463),i=a(8329);let d=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))});var o=a(9736);let c=s.forwardRef(function(e,t){let{title:a,titleId:l,...r}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),a?s.createElement("title",{id:l},a):null,s.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"}))});var x=a(1400);function m(){let e=(0,n.useRouter)(),[t,a]=(0,s.useState)(null),[m,u]=(0,s.useState)(!0),[h,g]=(0,s.useState)(""),[p,b]=(0,s.useState)(""),[f,v]=(0,s.useState)(1),[y,w]=(0,s.useState)(!1);(0,s.useEffect)(()=>{j()},[f,p]);let j=async()=>{try{u(!0);let t=new URLSearchParams({page:f.toString(),limit:"50",...p&&{search:p}}),l=await fetch("/api/admin/clients?".concat(t));if(401===l.status){e.push("/admin/login");return}if(!l.ok)throw Error("Failed to fetch clients");let s=await l.json();a(s),g("")}catch(e){g("Failed to load client data"),console.error(e)}finally{u(!1)}},N=async()=>{try{w(!0);let e=await fetch("/api/admin/clients/export");if(!e.ok)throw Error("Export failed");let t=e.headers.get("Content-Disposition"),a=t?t.split("filename=")[1].replace(/"/g,""):"clients_".concat(new Date().toISOString().split("T")[0],".csv"),l=await e.blob(),s=window.URL.createObjectURL(l),r=document.createElement("a");r.href=s,r.download=a,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(s),document.body.removeChild(r)}catch(e){g("Failed to export data"),console.error(e)}finally{w(!1)}},E=e=>{b(e),v(1)};return(0,l.jsxs)("div",{className:"min-h-screen bg-surface",children:[(0,l.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[(0,l.jsxs)(r.default,{href:"/admin",className:"flex items-center gap-2 text-teal hover:text-teal-dark font-semibold mb-4",children:[(0,l.jsx)(i.Z,{className:"w-4 h-4"}),"Back to Dashboard"]}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-navy",children:"Client Data Center"}),(0,l.jsx)("p",{className:"text-sm text-gray-600",children:"Manage and export collected client information"})]}),(0,l.jsxs)("button",{onClick:N,disabled:y||!t||0===t.total,className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold text-white bg-teal hover:bg-teal/90 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,l.jsx)(d,{className:"w-4 h-4"}),y?"Exporting...":"Export to Google Sheets"]})]})]})}),(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Total Clients"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-navy",children:(null==t?void 0:t.total)||0})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"From Checkout"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-teal",children:(null==t?void 0:t.clients.filter(e=>"checkout"===e.source).length)||0})]}),(0,l.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,l.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Current Page"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-navy",children:[(null==t?void 0:t.page)||1," / ",(null==t?void 0:t.pages)||1]})]})]}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(o.Z,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),(0,l.jsx)("input",{type:"text",placeholder:"Search by name, email, or region...",value:p,onChange:e=>E(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal"})]})}),h&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:h}),(0,l.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:m?(0,l.jsx)("div",{className:"p-12 text-center text-gray-500",children:(0,l.jsx)("p",{children:"Loading client data..."})}):t&&0!==t.clients.length?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full",children:[(0,l.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Full Name"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Email"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Region"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Source"}),(0,l.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Date"})]})}),(0,l.jsx)("tbody",{children:t.clients.map(e=>(0,l.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,l.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-navy",children:e.fullName}),(0,l.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:e.email}),(0,l.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:e.region}),(0,l.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,l.jsx)("span",{className:"inline-block px-3 py-1 bg-teal/10 text-teal rounded-full text-xs font-semibold",children:e.source||"website"})}),(0,l.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})}),t.pages>1&&(0,l.jsxs)("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",(t.page-1)*50+1," to"," ",Math.min(50*t.page,t.total)," of ",t.total," clients"]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>v(e=>Math.max(1,e-1)),disabled:1===t.page,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,l.jsx)(c,{className:"w-5 h-5 text-gray-600"})}),(0,l.jsxs)("span",{className:"text-sm font-medium text-navy",children:["Page ",t.page," of ",t.pages]}),(0,l.jsx)("button",{onClick:()=>v(e=>Math.min(t.pages,e+1)),disabled:t.page===t.pages,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,l.jsx)(x.Z,{className:"w-5 h-5 text-gray-600"})})]})]})]}):(0,l.jsx)("div",{className:"p-12 text-center text-gray-500",children:(0,l.jsx)("p",{children:p?"No clients match your search":"No client data collected yet"})})})]})]})}},6463:function(e,t,a){"use strict";var l=a(1169);a.o(l,"useParams")&&a.d(t,{useParams:function(){return l.useParams}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})},8329:function(e,t,a){"use strict";var l=a(2265);let s=l.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?l.createElement("title",{id:s},a):null,l.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))});t.Z=s},1400:function(e,t,a){"use strict";var l=a(2265);let s=l.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?l.createElement("title",{id:s},a):null,l.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))});t.Z=s},9736:function(e,t,a){"use strict";var l=a(2265);let s=l.forwardRef(function(e,t){let{title:a,titleId:s,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":s},r),a?l.createElement("title",{id:s},a):null,l.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))});t.Z=s}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=7620)}),_N_E=e.O()}]);