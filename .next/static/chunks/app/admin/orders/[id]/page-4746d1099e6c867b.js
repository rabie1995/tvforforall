(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[643],{4121:function(e,t,s){Promise.resolve().then(s.bind(s,2089))},2089:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(7437),l=s(2265),r=s(6463),n=s(7138),d=s(8329),i=s(4340);let c={plan_3m:"3 Months",plan_6m:"6 Months",plan_12m:"1 Year"};function o(){let e=(0,r.useRouter)(),t=(0,r.useParams)(),s=(null==t?void 0:t.id)||"",[o,m]=(0,l.useState)(null),[x,u]=(0,l.useState)(!0),[h,g]=(0,l.useState)(""),[f,b]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s&&p()},[s]);let p=async()=>{try{u(!0);let t=await fetch("/api/admin/orders/".concat(s));if(401===t.status){e.push("/admin/login");return}if(!t.ok)throw Error("Failed to fetch order");let a=await t.json();m(a),g("")}catch(e){g("Failed to load order details"),console.error(e)}finally{u(!1)}},j=async()=>{if(s){b(!0);try{let e=await fetch("/api/admin/orders/".concat(s,"/activate"),{method:"POST"});if(!e.ok){let t=await e.json();g(t.error||"Failed to activate order"),b(!1);return}await p(),b(!1)}catch(e){g("An error occurred"),b(!1)}}};return x?(0,a.jsx)("div",{className:"min-h-screen bg-surface py-12 px-4",children:(0,a.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Loading order details..."})})}):o?(0,a.jsx)("div",{className:"min-h-screen bg-surface py-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(n.default,{href:"/admin",className:"flex items-center gap-2 text-teal hover:text-teal-dark font-semibold mb-6",children:[(0,a.jsx)(d.Z,{className:"w-4 h-4"}),"Back to Orders"]}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-navy mb-2",children:"Order Details"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Order ID: ",o.id]})]}),h&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:h}),(0,a.jsxs)("div",{className:"grid gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-navy mb-4",children:"Customer Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Full Name"}),(0,a.jsx)("p",{className:"text-base font-medium text-navy",children:o.fullName})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),(0,a.jsx)("p",{className:"text-base font-medium text-navy",children:o.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Region"}),(0,a.jsx)("p",{className:"text-base font-medium text-navy",children:o.region})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Adult Channels"}),(0,a.jsx)("p",{className:"text-base font-medium text-navy",children:o.adultChannels?"Yes ✓":"No"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-navy mb-4",children:"Order Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Plan"}),(0,a.jsx)("p",{className:"text-base font-medium text-navy",children:c[o.productId]||o.productId})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Order Date"}),(0,a.jsx)("p",{className:"text-base font-medium text-navy",children:new Date(o.createdAt).toLocaleDateString()})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-navy mb-4",children:"Status"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Payment Status"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:"completed"===o.paymentStatus?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsx)("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Completed"})]}):(0,a.jsx)("span",{className:"inline-block px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-semibold",children:"Pending"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Delivery Status"}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:"completed"===o.deliveryStatus?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Z,{className:"w-5 h-5 text-green-600"}),(0,a.jsx)("span",{className:"inline-block px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-semibold",children:"Delivered"})]}):(0,a.jsx)("span",{className:"inline-block px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-semibold",children:"Pending"})})]})]})]}),"completed"!==o.deliveryStatus&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-navy mb-4",children:"Actions"}),(0,a.jsxs)("button",{onClick:j,disabled:f,className:"w-full bg-teal text-white font-semibold py-3 rounded-lg hover:bg-teal/90 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[f?"Activating...":"Mark as Delivered",!f&&(0,a.jsx)(i.Z,{className:"w-5 h-5"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-3",children:"Click to confirm delivery and activate the subscription for this customer."})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-surface py-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,a.jsx)("p",{className:"text-red-600",children:h||"Order not found"}),(0,a.jsx)(n.default,{href:"/admin",className:"text-teal hover:underline mt-4 inline-block",children:"← Back to admin"})]})})}},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},8329:function(e,t,s){"use strict";var a=s(2265);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{fillRule:"evenodd",d:"M11.03 3.97a.75.75 0 0 1 0 1.06l-6.22 6.22H21a.75.75 0 0 1 0 1.5H4.81l6.22 6.22a.75.75 0 1 1-1.06 1.06l-7.5-7.5a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 0 1 1.06 0Z",clipRule:"evenodd"}))});t.Z=l},4340:function(e,t,s){"use strict";var a=s(2265);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))});t.Z=l}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=4121)}),_N_E=e.O()}]);