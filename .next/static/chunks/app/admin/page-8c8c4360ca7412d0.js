(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1758:function(e,t,s){Promise.resolve().then(s.bind(s,8104))},8104:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return h}});var a=s(7437),l=s(2265),r=s(7138),n=s(6463);let d=l.forwardRef(function(e,t){let{title:s,titleId:a,...r}=e;return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},r),s?l.createElement("title",{id:a},s):null,l.createElement("path",{d:"M4.5 6.375a4.125 4.125 0 1 1 8.25 0 4.125 4.125 0 0 1-8.25 0ZM14.25 8.625a3.375 3.375 0 1 1 6.75 0 3.375 3.375 0 0 1-6.75 0ZM1.5 19.125a7.125 7.125 0 0 1 14.25 0v.003l-.001.119a.75.75 0 0 1-.363.63 13.067 13.067 0 0 1-6.761 1.873c-2.472 0-4.786-.684-6.76-1.873a.75.75 0 0 1-.364-.63l-.001-.122ZM17.25 19.128l-.001.144a2.25 2.25 0 0 1-.233.96 10.088 10.088 0 0 0 5.06-1.01.75.75 0 0 0 .42-.643 4.875 4.875 0 0 0-6.957-4.611 8.586 8.586 0 0 1 1.71 5.157v.003Z"}))});var i=s(2583),o=s(9736),c=s(1400);let x={plan_3m:"3 Months",plan_6m:"6 Months",plan_12m:"1 Year"},m={pending:"bg-yellow-100 text-yellow-800",completed:"bg-green-100 text-green-800"};function h(){let e=(0,n.useRouter)(),[t,s]=(0,l.useState)([]),[h,u]=(0,l.useState)(!0),[p,g]=(0,l.useState)(""),[f,b]=(0,l.useState)("");(0,l.useEffect)(()=>{y()},[]);let y=async()=>{try{u(!0);let e=await fetch("/api/admin/orders");if(401===e.status)return;if(!e.ok)throw Error("Failed to fetch orders");let t=await e.json();s(t),g("")}catch(e){g("Failed to load orders"),console.error(e)}finally{u(!1)}},v=async()=>{await fetch("/api/admin/logout",{method:"POST"}),e.push("/admin/login")},j=t.filter(e=>e.fullName.toLowerCase().includes(f.toLowerCase())||e.email.toLowerCase().includes(f.toLowerCase()));return(0,a.jsxs)("div",{className:"min-h-screen bg-surface",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-navy",children:"Admin Panel"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Manage orders and subscriptions"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(r.default,{href:"/admin/clients",className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold text-navy bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[(0,a.jsx)(d,{className:"w-4 h-4"}),"Client Data"]}),(0,a.jsxs)("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 text-sm font-semibold text-white bg-navy hover:bg-navy/90 rounded-lg transition-colors",children:[(0,a.jsx)(i.Z,{className:"w-4 h-4"}),"Logout"]})]})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Total Orders"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-navy",children:t.length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Payment Completed"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-green-600",children:t.filter(e=>"completed"===e.paymentStatus).length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Pending Payment"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:t.filter(e=>"pending"===e.paymentStatus).length})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Delivered"}),(0,a.jsx)("p",{className:"text-3xl font-bold text-teal",children:t.filter(e=>"completed"===e.deliveryStatus).length})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.Z,{className:"w-5 h-5 absolute left-3 top-3 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:f,onChange:e=>b(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-teal"})]})}),p&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-6",children:p}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:h?(0,a.jsx)("div",{className:"p-12 text-center text-gray-500",children:(0,a.jsx)("p",{children:"Loading orders..."})}):0===j.length?(0,a.jsx)("div",{className:"p-12 text-center text-gray-500",children:(0,a.jsx)("p",{children:f?"No orders match your search":"No orders yet"})}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50 border-b border-gray-200",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Region"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Plan"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Adult"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Payment"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Delivery"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-navy",children:"Date"}),(0,a.jsx)("th",{className:"px-6 py-3"})]})}),(0,a.jsx)("tbody",{children:j.map(e=>(0,a.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4 text-sm font-medium text-navy",children:e.fullName}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:e.email}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:e.region}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-700",children:x[e.productId]||e.productId}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm",children:e.adultChannels?(0,a.jsx)("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-semibold",children:"Yes"}):(0,a.jsx)("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-800 rounded-full text-xs font-semibold",children:"No"})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,a.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold ".concat(m[e.paymentStatus]),children:e.paymentStatus})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm",children:(0,a.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-xs font-semibold ".concat(m[e.deliveryStatus]),children:e.deliveryStatus})}),(0,a.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(e.createdAt).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)(r.default,{href:"/admin/orders/".concat(e.id),className:"text-teal hover:text-teal-dark font-semibold flex items-center gap-1",children:["View",(0,a.jsx)(c.Z,{className:"w-4 h-4"})]})})]},e.id))})]})})})]})]})}},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useParams")&&s.d(t,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(t,{useSearchParams:function(){return a.useSearchParams}})},2583:function(e,t,s){"use strict";var a=s(2265);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{fillRule:"evenodd",d:"M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm10.72 4.72a.75.75 0 0 1 1.06 0l3 3a.75.75 0 0 1 0 1.06l-3 3a.75.75 0 1 1-1.06-1.06l1.72-1.72H9a.75.75 0 0 1 0-1.5h10.94l-1.72-1.72a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))});t.Z=l},1400:function(e,t,s){"use strict";var a=s(2265);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))});t.Z=l},9736:function(e,t,s){"use strict";var a=s(2265);let l=a.forwardRef(function(e,t){let{title:s,titleId:l,...r}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":l},r),s?a.createElement("title",{id:l},s):null,a.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6.75 6.75 0 1 0 0 13.5 6.75 6.75 0 0 0 0-13.5ZM2.25 10.5a8.25 8.25 0 1 1 14.59 5.28l4.69 4.69a.75.75 0 1 1-1.06 1.06l-4.69-4.69A8.25 8.25 0 0 1 2.25 10.5Z",clipRule:"evenodd"}))});t.Z=l}},function(e){e.O(0,[138,971,23,744],function(){return e(e.s=1758)}),_N_E=e.O()}]);