"use strict";(()=>{var e={};e.id=146,e.ids=[146],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4897:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>v,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>f,staticGenerationAsyncStorage:()=>y});var a={};r.r(a),r.d(a,{GET:()=>p,POST:()=>l,dynamic:()=>d});var s=r(9303),n=r(8716),o=r(670),i=r(7070),u=r(3493);let d="force-dynamic";async function p(){let e=await u._.order.findMany({orderBy:{createdAt:"desc"},include:{product:!0,subscription:!0}});return i.NextResponse.json({orders:e.map(e=>({id:e.id,email:e.email,paymentStatus:e.paymentStatus,deliveryStatus:e.deliveryStatus,productName:e.product.name,createdAt:e.createdAt,subscriptionStatus:e.subscription?.status??null}))})}async function l(e){try{let{planId:t,email:r}=await e.json();if(!t)return i.NextResponse.json({error:"planId is required"},{status:400});let a=await u._.product.findUnique({where:{id:t}});if(!a)return i.NextResponse.json({error:"Plan not found"},{status:404});let s=await u._.order.create({data:{productId:a.id,fullName:"Test User",email:r&&r.trim()?r.trim():"test@tvforall.store",region:"N/A",adultChannels:!1,paymentStatus:"pending",deliveryStatus:"pending"}});return i.NextResponse.json({orderId:s.id,productName:a.name,paymentStatus:s.paymentStatus})}catch(e){return i.NextResponse.json({error:"Unable to create order"},{status:500})}}let c=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/orders/route",pathname:"/api/orders",filename:"route",bundlePath:"app/api/orders/route"},resolvedPagePath:"C:\\Users\\ULTRAPC\\tvforall\\app\\api\\orders\\route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:y,serverHooks:f}=c,v="/api/orders/route";function x(){return(0,o.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:y})}},3493:(e,t,r)=>{r.d(t,{_:()=>s});let a=require("@prisma/client"),s=globalThis.prisma||new a.PrismaClient({log:["error","warn"]})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,972],()=>r(4897));module.exports=a})();